services:
  - redis-server
  - memcache
  
env:
  global:
    - REPO="webignition/worker.simplytestable.com"
    - CI_HOME=`pwd`/$REPO

language: php
php:
  #- 5.3
  - 5.4
  #- 5.5

before_script:
  # General prep
  - sudo chmod +x ./travis/*.sh
  - ./travis/prep.sh
  
  # Install the W3C HTML validator
  #- sudo ./travis/install/3rdparty/html-validator.sh
  
  # Install nodejs and node-jslint
  #- sudo ./travis/install/3rdparty/node-jslint.sh  

  # Install the W3C CSS validator  
  #- sudo ./travis/install/3rdparty/css-validator.sh  
  
  # Install PHP extensions
  #- sudo ./travis/install/3rdparty/php-extensions.sh  
  
  # Install composer for dependency management
  - wget http://getcomposer.org/composer.phar 
  
  # Set the GitHub OAuth token to make use of the 6000 per hour rate limit
  - "mkdir -p ~/.composer"
  - cp .travis.composer.config.json ~/.composer/config.json  
  
  # Prep for installing SimplyTestable applications
  - ./travis/install/simplytestable/prep.sh
  
  # Install core app
  - ./travis/install/simplytestable/core-app/install.sh
  
script:
  - echo "Hello World!"
  
#notifications:
#  irc:
#    - "irc.freenode.org#simplytestable"
    
